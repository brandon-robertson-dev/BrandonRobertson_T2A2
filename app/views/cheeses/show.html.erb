<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @cheese.name %>
</p>

<p>
  <strong>Available At:</strong>
  <% store = @store.find(@cheese.store_id) %>
  <%= link_to store.name, store_path(store.id) %>
</p>

<p>
  <strong>Description:</strong>
  <%= @cheese.description %>
</p>

<p>
  <strong>Price:</strong>
  <%= @cheese.price %>
</p>

<p>
  <strong>Rennet coagulat:</strong>
  <%= @cheese.rennet_coagulat %>
</p>

<p>
  <strong>Location:</strong>
  <%= @cheese.location %>
</p>

<p>
  <strong>Cheese type:</strong>
  <%= @cheese.cheese_type %>
</p>

<p>
  <strong>Rind:</strong>
  <%= @cheese.rind %>
</p>

<p>
  <strong>Milk:</strong>
  <%= @cheese.milk %>
</p>

<p>
  <strong>Size:</strong>
  <%= @cheese.size %>
</p>



<p>
  <strong>Availability:</strong>
  <% if @cheese.availability > 0 %>
    <%= @cheese.availability %><br>
      <% if can? :buy, @cheese %>
        <button data-stripe="payment">
          Buy Now <%= number_to_currency(@cheese.price) %>
        </button>

        <script src="https://js.stripe.com/v3/"></script>

        <script>
          document
          .querySelector("[data-stripe='payment']")
          .addEventListener("click", () => {
            const stripe = Stripe(
              "<%= Rails.application.credentials.dig(:stripe, :public_key) %>"
            );

            stripe.redirectToCheckout({
              sessionId: "<%= @session_id %>"
            });
          });
        </script>
      <% end %>
  <% else %>
    <p>Sold Out</p>
  <% end %>
</p>
<% if can? :edit, @cheese %>
  <%= link_to 'Edit', edit_cheese_path(@cheese) %>
<% end %>
<% if can? :destroy, @cheese %>
  | <%= link_to 'Destroy', @cheese, method: :delete, data: { confirm: 'Are you sure?' } %>
<% end %>
